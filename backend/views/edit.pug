doctype html
html
  head
    title Edit #{product.name}
    style.
      body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; }
      .form-group { margin-bottom: 15px; }
      label { display: block; font-weight: bold; margin-bottom: 5px; }
      input { width: 100%; padding: 8px; box-sizing: border-box; }
      .back-link { display: inline-block; margin-top: 10px; color: #666; }

  body
    h1 Edit Product: #{product.name}
    
    //- Action includes token in query just in case, plus hidden input for body
    form(action=`/products/update/${product._id}?token=${token}` method="POST")
      //- HIDDEN TOKEN: This is the key to maintaining the session
      input(type="hidden" name="token" value=token)
      
      .form-group
        label Name:
        input(type="text" name="name" value=product.name required)
      
      .form-group
        label Price:
        input(type="number" name="price" value=product.price step="0.01")
      
      .form-group
        label Stock:
        input(type="number" name="stock" value=product.stock)
      
      button(type="submit" style="padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;") Save Changes
    
    br
    a.back-link(href=`/products?token=${token}`) ‚Üê Cancel and go back